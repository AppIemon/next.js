(()=>{var e={};e.id=5334,e.ids=[5334],e.modules={12518:e=>{"use strict";e.exports=require("mongodb")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},44870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},79428:e=>{"use strict";e.exports=require("buffer")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},11723:e=>{"use strict";e.exports=require("querystring")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},7413:(e,t,r)=>{"use strict";r.r(t),r.d(t,{patchFetch:()=>g,routeModule:()=>x,serverHooks:()=>w,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>v});var s={};r.r(s),r.d(s,{POST:()=>l});var n=r(42706),o=r(28203),i=r(45994),u=r(52445),a=r(12518),p=r(39187),c=r(51825),d=r(97360);async function l(e){let t=await (0,c.getServerSession)(d.authOptions);if(!t)return p.NextResponse.json({message:"로그인이 필요합니다"},{status:401});try{let{postId:r,content:s,parentId:n}=await e.json();if(!s||!r)return p.NextResponse.json({message:"필수 정보가 누락되었습니다"},{status:400});let o=(await u.X).db("forum"),i={postId:new a.ObjectId(r),content:s,author:new a.ObjectId(t.user.id),createdAt:new Date,parentId:n?new a.ObjectId(n):null},c=await o.collection("comment").insertOne(i);return p.NextResponse.json({message:"댓글이 작성되었습니다",id:c.insertedId})}catch(e){return console.error("댓글 작성 오류:",e),p.NextResponse.json({message:"댓글 작성 중 오류가 발생했습니다"},{status:500})}}let x=new n.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/comment/new/route",pathname:"/api/comment/new",filename:"route",bundlePath:"app/api/comment/new/route"},resolvedPagePath:"C:\\코딩\\p5\\forum\\app\\api\\comment\\new\\route.js",nextConfigOutput:"",userland:s}),{workAsyncStorage:m,workUnitAsyncStorage:v,serverHooks:w}=x;function g(){return(0,i.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:v})}},96487:()=>{},78335:()=>{},97360:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GET:()=>p,POST:()=>p,authOptions:()=>a});var s=r(51825),n=r.n(s),o=r(7553),i=r(40169),u=r(52445);let a={providers:[(0,o.A)({clientId:process.env.GITHUB_ID,clientSecret:process.env.GITHUB_SECRET})],secret:process.env.NEXTAUTH_SECRET,adapter:(0,i.Mp)(u.X)},p=n()(a)},52445:(e,t,r)=>{"use strict";r.d(t,{X:()=>o});var s=r(12518);let n=process.env.MONGODB_URI;if(!process.env.MONGODB_URI)throw Error("Please add your Mongo URI to .env.local");let o=new s.MongoClient(n,{}).connect()}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[638,5452,4512,9881],()=>r(7413));module.exports=s})();