(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7177],{3058:(e,t,r)=>{Promise.resolve().then(r.bind(r,199)),Promise.resolve().then(r.t.bind(r,4233,23)),Promise.resolve().then(r.t.bind(r,5427,23)),Promise.resolve().then(r.t.bind(r,9324,23))},199:(e,t,r)=>{"use strict";r.d(t,{A:()=>l,AuthProvider:()=>n});var o=r(5155),s=r(2115);let a=(0,s.createContext)(),l=()=>{let e=(0,s.useContext)(a);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};function n(e){let{children:t}=e,[r,l]=(0,s.useState)(null),[n,i]=(0,s.useState)(!0);(0,s.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("user");if(e){let t=JSON.parse(e);l(t)}}catch(e){console.error("Auth check failed:",e),localStorage.removeItem("user"),l(null)}finally{i(!1)}})()},[]);let c=async e=>{try{console.log("Attempting login...");let t=await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),cache:"no-store"}),r=await t.json();if(!t.ok)return{success:!1,error:r.message||"로그인에 실패했습니다"};return l(r),localStorage.setItem("user",JSON.stringify(r)),console.log("Login successful"),{success:!0}}catch(e){return console.error("Login error:",e),{success:!1,error:"로그인 처리 중 오류가 발생했습니다"}}},u=async e=>{try{if(!(null==r?void 0:r._id))return!1;if((await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:r._id,profileData:e})})).ok){let t={...r,...e};return l(t),localStorage.setItem("user",JSON.stringify(t)),!0}return!1}catch(e){return console.error("Profile update failed:",e),!1}};return(0,o.jsx)(a.Provider,{value:{user:r,loading:n,login:c,logout:()=>{l(null),localStorage.removeItem("user")},updateProfile:u,isAuthenticated:!!r,isLoading:n},children:t})}},9324:()=>{},4233:e=>{e.exports={style:{fontFamily:"'Geist', 'Geist Fallback'",fontStyle:"normal"},className:"__className_4d318d",variable:"__variable_4d318d"}},5427:e=>{e.exports={style:{fontFamily:"'Geist Mono', 'Geist Mono Fallback'",fontStyle:"normal"},className:"__className_ea5f4b",variable:"__variable_ea5f4b"}}},e=>{var t=t=>e(e.s=t);e.O(0,[8297,2533,8441,1517,7358],()=>t(3058)),_N_E=e.O()}]);