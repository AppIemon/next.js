(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6636],{8363:(e,a,s)=>{Promise.resolve().then(s.bind(s,7942))},473:(e,a,s)=>{"use strict";s.d(a,{default:()=>c});var l=s(5155),t=s(2115),n=s(8173),i=s.n(n),r=s(6046);let c=()=>{let[e,a]=(0,t.useState)(null),[s,n]=(0,t.useState)(!1),c=(0,r.useRouter)();return(0,t.useEffect)(()=>{let e=localStorage.getItem("user");e&&a(JSON.parse(e))},[]),(0,l.jsxs)("nav",{className:"navbar",children:[(0,l.jsxs)("div",{className:"nav-left",children:[(0,l.jsx)(i(),{href:"/",className:"nav-link",children:"홈"}),(0,l.jsx)(i(),{href:"/list",className:"nav-link",children:"게시판"})]}),(0,l.jsx)("div",{className:"nav-right",children:e?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{href:"/write",className:"nav-link write-btn",children:"글쓰기"}),(0,l.jsx)(i(),{href:"/profile",className:"nav-link",children:"프로필"}),(0,l.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),a(null),c.push("/login")},className:"nav-link",children:"로그아웃"})]}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i(),{href:"/login",className:"nav-link",children:"로그인"}),(0,l.jsx)(i(),{href:"/register",className:"nav-link",children:"회원가입"})]})})]})}},7942:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>r});var l=s(5155),t=s(2115),n=s(6046),i=s(473);function r(){let[e,a]=(0,t.useState)(null),[s,r]=(0,t.useState)(""),[c,d]=(0,t.useState)(!1),o=(0,n.useRouter)();(0,t.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){o.replace("/login");return}let s=JSON.parse(e);a(s),r(s.statusMessage||"")},[]);let m=async()=>{try{let l=await fetch("/api/user/status",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:e.username,statusMessage:s})});if(l.ok){let l={...e,statusMessage:s};localStorage.setItem("user",JSON.stringify(l)),a(l),d(!1)}else{let e=await l.json();alert(e.message)}}catch(e){alert("상태 메시지 업데이트 실패")}},u=async s=>{let l=s.target.files[0];if(!l)return;let t=new FormData;t.append("image",l),t.append("username",e.username);try{if((await fetch("/api/user/profile-image",{method:"POST",body:t})).ok){let s=new FileReader;s.onloadend=()=>{let l={...e,profileImage:s.result.split(",")[1]};localStorage.setItem("user",JSON.stringify(l)),a(l)},s.readAsDataURL(l)}}catch(e){alert("이미지 업로드 실패")}};return e?(0,l.jsxs)("div",{children:[(0,l.jsx)(i.default,{}),(0,l.jsxs)("div",{className:"profile-container",children:[(0,l.jsxs)("div",{className:"profile-header",children:[(0,l.jsxs)("div",{className:"profile-image-container",children:[e.profileImage?(0,l.jsx)("img",{src:"data:image/jpeg;base64,".concat(e.profileImage),alt:e.nickname,className:"profile-image"}):(0,l.jsx)("div",{className:"default-profile",children:e.nickname[0]}),(0,l.jsxs)("label",{className:"image-upload-label",children:[(0,l.jsx)("input",{type:"file",accept:"image/*",onChange:u,className:"hidden"}),"사진 변경"]})]}),(0,l.jsxs)("h2",{children:[e.nickname,"님의 프로필"]})]}),(0,l.jsx)("div",{className:"profile-content",children:c?(0,l.jsxs)("div",{className:"status-edit",children:[(0,l.jsx)("input",{type:"text",value:s,onChange:e=>r(e.target.value),placeholder:"상태 메시지를 입력하세요",maxLength:50}),(0,l.jsxs)("div",{className:"status-actions",children:[(0,l.jsx)("button",{onClick:m,className:"save-btn",children:"저장"}),(0,l.jsx)("button",{onClick:()=>d(!1),className:"cancel-btn",children:"취소"})]})]}):(0,l.jsxs)("div",{className:"status-display",children:[(0,l.jsx)("p",{className:"status-text",children:s||"상태 메시지가 없습니다"}),(0,l.jsx)("button",{onClick:()=>d(!0),className:"edit-btn",children:"수정"})]})})]})]}):(0,l.jsx)("div",{children:"Loading..."})}}},e=>{var a=a=>e(e.s=a);e.O(0,[1028,8441,1517,7358],()=>a(8363)),_N_E=e.O()}]);