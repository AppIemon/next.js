(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4426],{3093:(e,s,t)=>{Promise.resolve().then(t.bind(t,3484))},473:(e,s,t)=>{"use strict";t.d(s,{default:()=>c});var a=t(5155),l=t(2115),n=t(8173),r=t.n(n),i=t(6046);let c=()=>{let[e,s]=(0,l.useState)(null),[t,n]=(0,l.useState)(!1),c=(0,i.useRouter)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("user");e&&s(JSON.parse(e))},[]),(0,a.jsxs)("nav",{className:"navbar",children:[(0,a.jsxs)("div",{className:"nav-left",children:[(0,a.jsx)(r(),{href:"/",className:"nav-link",children:"홈"}),(0,a.jsx)(r(),{href:"/list",className:"nav-link",children:"게시판"})]}),(0,a.jsx)("div",{className:"nav-right",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{href:"/write",className:"nav-link write-btn",children:"글쓰기"}),(0,a.jsx)(r(),{href:"/profile",className:"nav-link",children:"프로필"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),s(null),c.push("/login")},className:"nav-link",children:"로그아웃"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{href:"/login",className:"nav-link",children:"로그인"}),(0,a.jsx)(r(),{href:"/register",className:"nav-link",children:"회원가입"})]})})]})}},3484:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>i});var a=t(5155),l=t(2115),n=t(6046),r=t(473);function i(){let[e,s]=(0,l.useState)(""),[t,i]=(0,l.useState)(""),[c,u]=(0,l.useState)([]),[o,h]=(0,l.useState)(!0),d=(0,n.useRouter)();(0,l.useEffect)(()=>{let e=localStorage.getItem("user");if(!e){d.push("/login");return}let s=JSON.parse(e);if(s.expires&&s.expires<Date.now()){localStorage.removeItem("user"),d.push("/login");return}h(!1)},[]);let m=e=>{u(c.filter((s,t)=>t!==e))},p=async s=>{s.preventDefault();let a=new FormData;a.append("title",e),a.append("content",t);let l=JSON.parse(localStorage.getItem("user"));a.append("author",l.nickname),c.forEach(e=>{a.append("files",e)});try{let e=await fetch("/api/post/write",{method:"POST",body:a});if(e.ok)d.push("/list");else{let s=await e.json();alert(s.message)}}catch(e){alert("게시물 작성 실패")}};return o?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{children:[(0,a.jsx)(r.default,{}),(0,a.jsx)("div",{className:"write-container",children:(0,a.jsxs)("form",{onSubmit:p,children:[(0,a.jsx)("input",{type:"text",placeholder:"제목",value:e,onChange:e=>s(e.target.value)}),(0,a.jsx)("textarea",{placeholder:"내용",value:t,onChange:e=>i(e.target.value)}),(0,a.jsxs)("div",{className:"file-upload-section",children:[(0,a.jsxs)("label",{className:"file-upload-label",children:[(0,a.jsx)("input",{type:"file",multiple:!0,onChange:e=>{let s=Array.from(e.target.files);u(e=>[...e,...s])},className:"file-input"}),"파일 첨부하기"]}),(0,a.jsx)("div",{className:"file-list",children:c.map((e,s)=>(0,a.jsxs)("div",{className:"file-item",children:[(0,a.jsxs)("span",{children:[e.type.startsWith("image/")?"\uD83D\uDDBC️":"\uD83D\uDCCE"," ",e.name]}),(0,a.jsx)("button",{type:"button",onClick:()=>m(s),className:"file-remove",children:"✕"})]},s))})]}),(0,a.jsx)("button",{type:"submit",className:"write-submit-button",children:"저장"})]})})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[1028,8441,1517,7358],()=>s(3093)),_N_E=e.O()}]);