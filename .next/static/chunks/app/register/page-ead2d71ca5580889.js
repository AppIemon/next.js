(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2454],{3669:(e,t,s)=>{Promise.resolve().then(s.bind(s,5272))},473:(e,t,s)=>{"use strict";s.d(t,{default:()=>c});var a=s(5155),l=s(2115),n=s(8173),r=s.n(n),i=s(6046);let c=()=>{let[e,t]=(0,l.useState)(null),[s,n]=(0,l.useState)(!1),c=(0,i.useRouter)();return(0,l.useEffect)(()=>{let e=localStorage.getItem("user");e&&t(JSON.parse(e))},[]),(0,a.jsxs)("nav",{className:"navbar",children:[(0,a.jsxs)("div",{className:"nav-left",children:[(0,a.jsx)(r(),{href:"/",className:"nav-link",children:"홈"}),(0,a.jsx)(r(),{href:"/list",className:"nav-link",children:"게시판"})]}),(0,a.jsx)("div",{className:"nav-right",children:e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{href:"/write",className:"nav-link write-btn",children:"글쓰기"}),(0,a.jsx)(r(),{href:"/profile",className:"nav-link",children:"프로필"}),(0,a.jsx)("button",{onClick:()=>{localStorage.removeItem("user"),t(null),c.push("/login")},className:"nav-link",children:"로그아웃"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(r(),{href:"/login",className:"nav-link",children:"로그인"}),(0,a.jsx)(r(),{href:"/register",className:"nav-link",children:"회원가입"})]})})]})}},5272:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>i});var a=s(5155),l=s(2115),n=s(6046),r=s(473);function i(){let e=(0,n.useRouter)(),[t,s]=(0,l.useState)(!0),[i,c]=(0,l.useState)(!1),[h,u]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[f,m]=(0,l.useState)(""),[g,v]=(0,l.useState)("");if((0,l.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/auth/session");if((await t.json()).user){e.replace("/list");return}}catch(e){console.error("Session check error:",e)}s(!1)})()},[e]),t)return(0,a.jsx)("div",{children:"Loading..."});let p=()=>h.trim()&&o.trim()&&f.trim()?h.length<4||h.length>20?(v("아이디는 4자 이상 20자 이하여야 합니다"),!1):/^[a-zA-Z0-9]+$/.test(h)?o.length<6||o.length>20?(v("비밀번호는 6자 이상 20자 이하여야 합니다"),!1):!(f.length<2)&&!(f.length>10)||(v("닉네임은 2자 이상 10자 이하여야 합니다"),!1):(v("아이디는 영문자와 숫자만 사용 가능합니다"),!1):(v("모든 필드를 입력해주세요"),!1),j=async t=>{if(t.preventDefault(),v(""),p()){c(!0);try{let t=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:h,password:o,nickname:f})}),s=await t.json();t.ok?(alert("회원가입이 완료되었습니다."),e.push("/login")):v(s.message||"회원가입에 실패했습니다")}catch(e){v("서버 오류가 발생했습니다")}finally{c(!1)}}};return(0,a.jsxs)("div",{children:[(0,a.jsx)(r.default,{}),(0,a.jsxs)("form",{onSubmit:j,className:"auth-form",children:[g&&(0,a.jsx)("p",{className:"error-message",children:g}),(0,a.jsx)("input",{type:"text",placeholder:"아이디",value:h,onChange:e=>u(e.target.value)}),(0,a.jsx)("input",{type:"password",placeholder:"비밀번호",value:o,onChange:e=>d(e.target.value)}),(0,a.jsx)("input",{type:"text",placeholder:"닉네임",value:f,onChange:e=>m(e.target.value)}),(0,a.jsx)("button",{type:"submit",disabled:i,children:i?"처리중...":"회원가입"})]})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[1028,8441,1517,7358],()=>t(3669)),_N_E=e.O()}]);